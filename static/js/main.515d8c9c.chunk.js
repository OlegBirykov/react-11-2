(this["webpackJsonpreact-11-2"]=this["webpackJsonpreact-11-2"]||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n(15),a=n.n(c),i=(n(32),n(25)),s=n(4),o=(n(33),n(10)),l=n(9),d=n.n(l),u=n(14),b="FETCH_SERVICES_REQUEST",p="FETCH_SERVICES_FAILURE",j="FETCH_SERVICES_SUCCESS",v="DELETE_SERVICE_REQUEST",O="DELETE_SERVICE_FAILURE",h="DELETE_SERVICE_SUCCESS",E="EDIT_SERVICE_REQUEST",m="EDIT_SERVICE_FAILURE",f="EDIT_SERVICE_SUCCESS",x="CHANGE_SERVICE_FIELD",g="ADD_SERVICE_REQUEST",S="ADD_SERVICE_FAILURE",y="ADD_SERVICE_SUCCESS",C="ADD_SERVICE_FINISH",_=function(e){return{type:v,payload:{id:e}}},w=function(e){return{type:h,payload:{id:e}}},N=function(e){return{type:S,payload:{addingError:e}}},I=function(){return function(){var e=Object(u.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:b}),e.prev=1,e.next=4,fetch("".concat("http://localhost:7070/api/services"));case 4:if((n=e.sent).ok){e.next=7;break}throw new Error(n.statusText);case 7:return e.next=9,n.json();case 9:r=e.sent,t({type:j,payload:{items:r}}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),t((c=e.t0.message,{type:p,payload:{error:c}}));case 16:case"end":return e.stop()}var c}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}()},k=function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:E}),t.prev=1,t.next=4,fetch("".concat("http://localhost:7070/api/services","/").concat(e));case 4:if((r=t.sent).ok){t.next=7;break}throw new Error(r.statusText);case 7:return t.next=9,r.json();case 9:c=t.sent,n({type:f,payload:{item:c}}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n((a=t.t0.message,{type:m,payload:{loadingError:a}}));case 16:case"end":return t.stop()}var a}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},D=n(1);var A=function(e){var t=e.history,n=e.match,c=Object(o.c)((function(e){return e.serviceAdd})),a=c.item,i=c.loading,s=c.loadingError,l=c.adding,b=c.addingError,p=c.finish,j=Object(o.b)();Object(r.useEffect)((function(){j(k(n.params.id))}),[j,n.params.id]),Object(r.useEffect)((function(){p&&(j({type:C}),t.push("/react-11-2/services"))}),[p]);var v=function(e){var t=e.target,n=t.name,r=t.value;j(function(e,t){return{type:x,payload:{name:e,value:t}}}(n,r))};return s?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("p",{className:"error",children:s}),Object(D.jsx)("button",{className:"error-button",onClick:function(){j(k(n.params.id))},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"})]}):i?Object(D.jsx)("svg",{className:"spinner ServiceAdd-spinner",viewBox:"0 0 50 50",children:Object(D.jsx)("circle",{className:"spinner-circle ServiceAdd-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})}):Object(D.jsxs)("form",{className:"ServiceAdd",onSubmit:function(e){e.preventDefault();var t={id:a.id,name:a.name.trim(),price:"string"===typeof a.price?a.price.trim():a.price,content:a.content.trim()};t.name?t.price?(t.price=Math.trunc(+t.price),isNaN(t.price)||t.price<=0?j(N('\u0412 \u043f\u043e\u043b\u0435 "\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0446\u0435\u043b\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432')):j(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:g,payload:{name:void 0,price:void 0,content:void 0}}),t.prev=1,t.next=4,fetch("".concat("http://localhost:7070/api/services"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=7;break}throw new Error(r.statusText);case 7:n({type:y}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n(N(t.t0.message));case 13:I();case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}(t))):j(N('\u0412 \u043f\u043e\u043b\u0435 "\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c" \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u0446\u0435\u043b\u043e\u0435 \u043f\u043e\u043b\u043e\u0436\u0438\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u0447\u0438\u0441\u043b\u043e \u0431\u0435\u0437 \u043f\u0440\u043e\u0431\u0435\u043b\u043e\u0432')):j(N('\u041f\u043e\u043b\u0435 "\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435" \u043d\u0435 \u0434\u043e\u043b\u0436\u043d\u043e \u0431\u044b\u0442\u044c \u043f\u0443\u0441\u0442\u044b\u043c'))},children:[Object(D.jsxs)("label",{children:["\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",Object(D.jsx)("input",{name:"name",disabled:l,onChange:v,value:a.name})]}),Object(D.jsxs)("label",{children:["\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c",Object(D.jsx)("input",{name:"price",disabled:l,onChange:v,value:a.price})]}),Object(D.jsxs)("label",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",Object(D.jsx)("input",{name:"content",disabled:l,onChange:v,value:a.content})]}),Object(D.jsxs)("div",{className:"ServiceAdd-buttons",children:[Object(D.jsx)("button",{className:l?"ServiceAdd-button-cancel button-disabled":"ServiceAdd-button-cancel",onClick:function(){t.push("/react-11-2/services")},disabled:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(D.jsxs)("button",{className:l?"ServiceAdd-button-save button-spinner":"ServiceAdd-button-save",type:"submit",disabled:l,children:[l?"\u0421":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",l&&Object(D.jsx)("svg",{className:"spinner ServiceAdd-button-spinner",viewBox:"0 0 50 50",children:Object(D.jsx)("circle",{className:"spinner-circle ServiceAdd-button-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})})]})]}),b&&Object(D.jsx)("p",{className:"ServiceAdd-error",children:b})]})};var R=function(e){var t=e.history,n=Object(o.c)((function(e){return e.serviceList})),c=n.items,a=n.loading,i=n.error,s=n.deletingFinish,l=Object(o.b)();Object(r.useEffect)((function(){l(I())}),[l]),Object(r.useEffect)((function(){s&&l(I())}),[l,s]);var b=function(e){l(function(e){return function(){var t=Object(u.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_(e)),t.prev=1,t.next=4,fetch("".concat("http://localhost:7070/api/services","/").concat(e),{method:"DELETE"});case 4:if((r=t.sent).ok){t.next=7;break}throw new Error(r.statusText);case 7:n(w(e)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),n((c=t.t0.message,{type:O,payload:{error:c}}));case 13:case"end":return t.stop()}var c}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}()}(e))};return i?Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)("p",{className:"error",children:i}),Object(D.jsx)("button",{className:"error-button",onClick:function(){l(I())},children:"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0451 \u0440\u0430\u0437"})]}):a?Object(D.jsx)("svg",{className:"spinner ServiceList-spinner",viewBox:"0 0 50 50",children:Object(D.jsx)("circle",{className:"spinner-circle ServiceList-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})}):Object(D.jsx)("ul",{className:"ServiceList",children:c.map((function(e){return Object(D.jsxs)("li",{className:"ServiceList-item",children:[Object(D.jsx)("p",{className:"ServiceList-text",children:"".concat(e.name,": ").concat(e.price," \u0440\u0443\u0431.")}),!(e.deleting||e.isDeleted)&&Object(D.jsx)("button",{className:"ServiceList-button-edit",onClick:function(){return n=e.id,void t.push("/react-11-2/services/"+n);var n},children:"\u270e"}),Object(D.jsxs)("button",{className:e.deleting||e.isDeleted?"ServiceList-button-delete button-spinner":"ServiceList-button-delete",disabled:e.deleting||e.isDeleted,onClick:function(){return b(e.id)},children:["\u2715",(e.deleting||e.isDeleted)&&Object(D.jsx)("svg",{className:"spinner ServiceList-button-spinner",viewBox:"0 0 50 50",children:Object(D.jsx)("circle",{className:"spinner-circle ServiceList-button-spinner-circle",cx:"25",cy:"25",r:"20",fill:"none"})})]})]},e.id)}))})};var L=function(){return Object(D.jsx)(i.a,{children:Object(D.jsx)("div",{className:"App",children:Object(D.jsxs)(s.d,{children:[Object(D.jsx)(s.b,{path:"/react-11-2/services/:id([0-9]+)",component:A}),Object(D.jsx)(s.b,{path:"/react-11-2/services",component:R}),Object(D.jsx)(s.a,{to:"/react-11-2/services"})]})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var T=n(11),F=n(2),V={items:[],loading:!1,error:null,deletingFinish:!1};var U=n(17),B={item:{id:"",name:"",price:"",content:""},loading:!1,loadingError:null,adding:!1,addingError:null,finish:!1};var H=n(27),Q=Object(T.c)({serviceList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(F.a)(Object(F.a)({},e),{},{loading:!0,error:null,deletingFinish:!1});case p:var n=t.payload.error;return Object(F.a)(Object(F.a)({},e),{},{loading:!1,error:n});case j:var r=t.payload.items;return Object(F.a)(Object(F.a)({},e),{},{items:r,loading:!1,error:null});case v:var c=t.payload.id;return Object(F.a)(Object(F.a)({},e),{},{items:e.items.map((function(e){return e.id===c?Object(F.a)(Object(F.a)({},e),{},{deleting:!0}):e}))});case O:var a=t.payload.error;return Object(F.a)(Object(F.a)({},e),{},{error:a});case h:var i=t.payload.id,s=Object(F.a)(Object(F.a)({},e),{},{items:e.items.map((function(e){return e.id===i?Object(F.a)(Object(F.a)({},e),{},{deleting:!1,isDeleted:!0}):e}))});return Object(F.a)(Object(F.a)({},s),{},{deletingFinish:s.items.reduce((function(e,t){return e&&!t.deleting}),!0)});default:return e}},serviceAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(F.a)(Object(F.a)({},e),{},{loading:!0,loadingError:null,adding:!1,addingError:null});case m:var n=t.payload.loadingError;return Object(F.a)(Object(F.a)({},e),{},{loading:!1,loadingError:n});case f:var r=t.payload.item;return Object(F.a)(Object(F.a)({},e),{},{item:r,loading:!1,loadingError:null});case x:var c=t.payload,a=c.name,i=c.value;return Object(F.a)(Object(F.a)({},e),{},{item:Object(F.a)(Object(F.a)({},e.item),{},Object(U.a)({},a,i))});case g:return Object(F.a)(Object(F.a)({},e),{},{adding:!0,error:null});case S:var s=t.payload.addingError;return Object(F.a)(Object(F.a)({},e),{},{adding:!1,addingError:s});case y:return Object(F.a)(Object(F.a)({},e),{},{adding:!1,addingError:null,finish:!0});case C:return Object(F.a)({},B);default:return e}}}),J=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||T.d,M=Object(T.e)(Q,J(Object(T.a)(H.a)));a.a.render(Object(D.jsx)(o.a,{store:M,children:Object(D.jsx)(L,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[41,1,2]]]);
//# sourceMappingURL=main.515d8c9c.chunk.js.map